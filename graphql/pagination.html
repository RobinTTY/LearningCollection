<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-graphql/pagination" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Pagination | Learning Collection Knowledge Base</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://RobinTTY.github.io/LearningCollection/graphql/pagination"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Pagination | Learning Collection Knowledge Base"><meta data-rh="true" name="description" content="Often, sets of data are too large to pass them directly to the consumer of our service. Pagination solves this problem by giving the consumer the ability to fetch a set in chunks. The current landscape of the pagination in GraphQL is hugely influenced by the Relay spec for Connections."><meta data-rh="true" property="og:description" content="Often, sets of data are too large to pass them directly to the consumer of our service. Pagination solves this problem by giving the consumer the ability to fetch a set in chunks. The current landscape of the pagination in GraphQL is hugely influenced by the Relay spec for Connections."><link data-rh="true" rel="icon" href="/LearningCollection/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://RobinTTY.github.io/LearningCollection/graphql/pagination"><link data-rh="true" rel="alternate" href="https://RobinTTY.github.io/LearningCollection/graphql/pagination" hreflang="en"><link data-rh="true" rel="alternate" href="https://RobinTTY.github.io/LearningCollection/graphql/pagination" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Pagination","item":"https://RobinTTY.github.io/LearningCollection/graphql/pagination"}]}</script><link rel="stylesheet" href="/LearningCollection/assets/css/styles.619a2ab9.css">
<script src="/LearningCollection/assets/js/runtime~main.443627b6.js" defer="defer"></script>
<script src="/LearningCollection/assets/js/main.b25615a7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/LearningCollection/"><div class="navbar__logo"><img src="/LearningCollection/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/LearningCollection/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Learning Collection</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/LearningCollection/">Docs</a><a class="navbar__item navbar__link" sidebarid="finance" href="/LearningCollection/finance/introduction">Finance</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/LearningCollection/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/LearningCollection/general-concepts/callStack">General Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/LearningCollection/cloud/aws/certified-developer-associate/cloud-overview">Cloud</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/LearningCollection/csharp/introduction">C#</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/LearningCollection/web/html/doctype">Web</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/LearningCollection/databases/sql">Databases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/LearningCollection/kubernetes/architecture">Kubernetes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/LearningCollection/graphql/intro">GraphQL</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/LearningCollection/graphql/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/LearningCollection/graphql/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/LearningCollection/graphql/core-concepts">Core Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/LearningCollection/graphql/clients">Clients</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/LearningCollection/graphql/server">Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/LearningCollection/graphql/pagination">Pagination</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/LearningCollection/graphql/advanced-concepts/miscellaneous-concepts">Advanced Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/LearningCollection/graphql/schemas-and-types/interfaces">schemas-and-types</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/LearningCollection/tools/git/tags">Tools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/LearningCollection/linux/commonlyUsedCommands">Linux</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/LearningCollection/interesting-topics">Interesting Topics</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/LearningCollection/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">GraphQL</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Pagination</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Pagination</h1></header><p>Often, sets of data are too large to pass them directly to the consumer of our service. Pagination solves this problem by giving the consumer the ability to fetch a set in chunks. The current landscape of the pagination in GraphQL is hugely influenced by the <a href="https://relay.dev/graphql/connections.htm" target="_blank" rel="noopener noreferrer">Relay spec</a> for Connections.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="connections-vs-offset">Connections vs Offset<a href="#connections-vs-offset" class="hash-link" aria-label="Direct link to Connections vs Offset" title="Direct link to Connections vs Offset">​</a></h2>
<p>GraphQL connections use cursor based pagination which is very well suited for large data sets as compared to offset based pagination. Offset pagination has drawbacks:</p>
<ul>
<li>If items are being written to the dataset at a high frequency, the page window becomes unreliable, potentially skipping or returning duplicate results.</li>
<li>Using <code>LIMIT &lt;count&gt; OFFSET &lt;offset&gt;</code> doesn’t scale well for large datasets. As the offset increases the farther you go within the dataset, the database still has to read up to offset + count rows from disk, before discarding the offset and only returning count rows</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="offset-problem-visualized">Offset problem visualized<a href="#offset-problem-visualized" class="hash-link" aria-label="Direct link to Offset problem visualized" title="Direct link to Offset problem visualized">​</a></h3>
<p>We get some paginated data with our first request:</p>
<p><img decoding="async" loading="lazy" alt="offset-problem" src="/LearningCollection/assets/images/offset-problem-59e011ffc98303c7b9d77acea08fab78.png" width="1240" height="247" class="img_ev3q"></p>
<p>Before we can request the next page, the data set changes and we get a shifted result:</p>
<p><img decoding="async" loading="lazy" alt="offset-problem2" src="/LearningCollection/assets/images/offset-problem2-62dcd9815cfbca52afbd4c1291396f13.png" width="1195" height="187" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connections-approach">Connections approach<a href="#connections-approach" class="hash-link" aria-label="Direct link to Connections approach" title="Direct link to Connections approach">​</a></h3>
<p>Connections solve this problem by using a cursor based pagination. Instead of using an offset, we use a cursor to fetch the next page. The cursor is a pointer to a specific item in the data set. The cursor is opaque to the client and can be anything that can be sorted. For example, it could be a date, a unique ID, or a pointer to an object in a database.</p>
<p>The spec outlines the following components:</p>
<ul>
<li><strong>connection</strong>: a wrapper for details on a list of data you’re paginating through. A connection has two fields: edges and pageInfo.</li>
<li><strong>edges</strong>: a list of edge types.</li>
<li><strong>edge</strong>: a wrapper around the object being returned in the list. An edge type has two fields: node and cursor.</li>
<li><strong>node</strong>: this is the actual object, for example, user details.</li>
<li><strong>cursor</strong>: this is a string field that is used to identify a specific edge.</li>
<li><strong>pageInfo</strong>: contains two fields hasPreviousPage and hasNextPage which can be used to determine whether or not you need to request another set of results.</li>
</ul>
<p>While the above might seem verbose, it allows the server to implement a robust pagination scheme:</p>
<ul>
<li>Returning a list of edge wrappers, each with a cursor, enables the client to paginate forwards and backwards from any point within the result set.</li>
<li>The pageInfo details let the client clearly know if there is a previous or next page to fetch.</li>
<li>Requiring the cursor to be a string value promotes the use of an opaque cursor value. The javascript implementation of the Relay spec for instance uses Base64 encoded IDs as cursor values. This discourages the client from implying what value goes in this field and gives the server the ability to encode additional information within the cursor.</li>
</ul>
<p>With this setup we can request the next page without having to worry about the data set changing:</p>
<p><img decoding="async" loading="lazy" alt="cursor-pagination1" src="/LearningCollection/assets/images/cursor-pagination1-6c0fbda5cf31aa5f1e80fae2e304ece9.png" width="1267" height="304" class="img_ev3q"></p>
<p>Second request:</p>
<p><img decoding="async" loading="lazy" alt="cursor-pagination2" src="/LearningCollection/assets/images/cursor-pagination2-afc854c5e10f8eb3b6ef4744d39cc467.png" width="1219" height="265" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="an-example-relay-spec">An Example (Relay spec)<a href="#an-example-relay-spec" class="hash-link" aria-label="Direct link to An Example (Relay spec)" title="Direct link to An Example (Relay spec)">​</a></h2>
<p>There are three important points to understand:</p>
<ul>
<li><strong>Edges themselves have properties</strong> — for example, in a list of your friends, the date when you friended that person is a property of the edge between you, rather than of the other person per se. We handle this by creating nodes that represent the edges.</li>
<li><strong>The list itself has properties</strong>, such as whether or not there is a next page available. We handle this with a node that represent the list itself as well as one for the current page.</li>
<li><strong>Pagination is done by cursors</strong> — opaque symbols that point to the next page of results — rather than offsets.</li>
</ul>
<p>Imagine we want to show a list of the user’s friends. At a high level, we imagine a graph where the viewer and their friends are each nodes. From the viewer to each friend node is an edge, and the edge itself has properties:</p>
<p><img decoding="async" loading="lazy" alt="conceptual-graph1" src="/LearningCollection/assets/images/conceptual-graph1-a88c591f79c81af5d67b28122e17c581.png" width="1570" height="894" class="img_ev3q"></p>
<p>In GraphQL, only nodes can have properties, not edges. So the first thing we’ll do is represent the conceptual edge from you to your friend with its very own node:</p>
<p><img decoding="async" loading="lazy" alt="conceptual-graph2" src="/LearningCollection/assets/images/conceptual-graph2-63a89a1f08749046137894e4b24774cc.png" width="1466" height="1076" class="img_ev3q"></p>
<p>Now the properties of the edge are represented by a new type of node called a <code>FriendsEdge</code>. The GraphQL to query this would like this:</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:#d73a49">FriendsFragment1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Viewer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token object">friends</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">since</span><span class="token plain"> // </span><span class="token property" style="color:#36acaa">a</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">property</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">of</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">the</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">edge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token object">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">name</span><span class="token plain"> // </span><span class="token property" style="color:#36acaa">a</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">property</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">of</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">the</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">friend</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">itself</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-pagination-is-modeled">How pagination is modeled<a href="#how-pagination-is-modeled" class="hash-link" aria-label="Direct link to How pagination is modeled" title="Direct link to How pagination is modeled">​</a></h3>
<p>Now we have a good place in the GraphQL schema to put edge-specific information such as the date when the edge was created (that is, the date you friended that person). Now consider what we would need to model in our schema in order to support pagination and infinite scrolling:</p>
<ul>
<li>The client must be able to specify <strong>how large of a page</strong> it wants.</li>
<li>The client must be informed as to <strong>whether any more pages are available</strong>, so that it can enable or disable the ‘next page’ button (or, for infinite scrolling, can stop making further requests).</li>
<li>The client must be <strong>able to ask for the next page</strong> after the one it already has.</li>
</ul>
<p>Specifying the page size is done with field arguments. In other words, instead of just <code>friends</code> the query will say <code>friends(first: 3)</code>, passing the page size an argument to the <code>friends</code> field.</p>
<p>For the server to say whether there is a next page or not, we need to <strong>introduce a node in the graph that has information about the list of friends itself</strong>, just like we are introducing a node for each edge to store information about the edge itself. This new node is called <strong>a Connection</strong>.</p>
<p>The Connection node represents the connection itself between you and your friends:</p>
<ul>
<li>e.g. it could have a totalCount field that says how many friends you have</li>
<li>It always has two fields which represent the current page:<!-- -->
<ul>
<li>The <code>pageInfo</code> field with metadata about the current page, such as whether there is another page available</li>
<li>An <code>edges</code> field that points to the edges we saw before</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="conceptual-graph3" src="/LearningCollection/assets/images/conceptual-graph3-13e2ea59a6271992070d77ae4ae5e9b6.png" width="1924" height="1334" class="img_ev3q"></p>
<p>Finally, we need a way to request the next page of results. You’ll notice in the above diagram that the <code>PageInfo</code> node has a field called <code>lastCursor</code>. This is an opaque token provided by the server that represents the position in the list of the last edge that we were given (the friend “Charmaine”). We can then pass this cursor back to the server in order to retrieve the next page.</p>
<p>By passing the <code>lastCursor</code> value back to the server as an argument to the <code>friends</code> field, we can ask the server for friends that are after the ones we’ve already retrieved:</p>
<p><img decoding="async" loading="lazy" alt="conceptual-graph4" src="/LearningCollection/assets/images/conceptual-graph4-88f27142830f48b2f0184ebcd0e9ad8d.png" width="1926" height="1336" class="img_ev3q"></p>
<p>This overall scheme for modeling paginated lists is specified in detail in the <a href="https://relay.dev/graphql/connections.htm" target="_blank" rel="noopener noreferrer">GraphQL Cursor Connections Spec</a>. It is flexible for many different applications, and although Relay relies on this convention to handle pagination automatically, designing your schema this way is a good idea whether or not you use Relay.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/RobinTTY/LearningCollection/tree/master/website/docs/graphql/pagination.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/LearningCollection/graphql/server"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Server</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/LearningCollection/graphql/advanced-concepts/miscellaneous-concepts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Miscellaneous Concepts</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#connections-vs-offset" class="table-of-contents__link toc-highlight">Connections vs Offset</a><ul><li><a href="#offset-problem-visualized" class="table-of-contents__link toc-highlight">Offset problem visualized</a></li><li><a href="#connections-approach" class="table-of-contents__link toc-highlight">Connections approach</a></li></ul></li><li><a href="#an-example-relay-spec" class="table-of-contents__link toc-highlight">An Example (Relay spec)</a><ul><li><a href="#how-pagination-is-modeled" class="table-of-contents__link toc-highlight">How pagination is modeled</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">My other sites</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.robintty.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Socials</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/RobinTTY" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/robin-m%C3%BCller-574782170/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>