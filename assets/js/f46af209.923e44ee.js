"use strict";(self.webpackChunklearning_knowledge_base=self.webpackChunklearning_knowledge_base||[]).push([[3587],{12261:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>o});var i=s(74848),l=s(28453);const r={title:"Elastic Compute Cloud (EC2)",sidebar_position:3},t=void 0,a={id:"cloud/aws/certified-developer-associate/ec2",title:"Elastic Compute Cloud (EC2)",description:"EC2 is the Infrastructure as a Service offering of AWS. It mainly consists in the capability of:",source:"@site/docs/cloud/aws/certified-developer-associate/ec2.md",sourceDirName:"cloud/aws/certified-developer-associate",slug:"/cloud/aws/certified-developer-associate/ec2",permalink:"/LearningCollection/cloud/aws/certified-developer-associate/ec2",draft:!1,unlisted:!1,editUrl:"https://github.com/RobinTTY/LearningCollection/tree/master/website/docs/cloud/aws/certified-developer-associate/ec2.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Elastic Compute Cloud (EC2)",sidebar_position:3},sidebar:"docs",previous:{title:"Identity and Access Management (IAM)",permalink:"/LearningCollection/cloud/aws/certified-developer-associate/iam"},next:{title:"Elastic Load Balancing (ELB)",permalink:"/LearningCollection/cloud/aws/certified-developer-associate/elb"}},c={},o=[{value:"EC2 sizing &amp; configuration options",id:"ec2-sizing--configuration-options",level:2},{value:"EC2 User Data",id:"ec2-user-data",level:3},{value:"EC2 Instance Types",id:"ec2-instance-types",level:3},{value:"Security Groups",id:"security-groups",level:2},{value:"Referencing other security groups - Diagram",id:"referencing-other-security-groups---diagram",level:3},{value:"Classic Ports to know",id:"classic-ports-to-know",level:3},{value:"EC2 Instances Purchasing Options",id:"ec2-instances-purchasing-options",level:2},{value:"EC2 On Demand",id:"ec2-on-demand",level:3},{value:"EC2 Reserved Instances",id:"ec2-reserved-instances",level:3},{value:"EC2 Savings Plans",id:"ec2-savings-plans",level:3},{value:"EC2 Spot Instances",id:"ec2-spot-instances",level:3},{value:"EC2 Dedicated Hosts",id:"ec2-dedicated-hosts",level:3},{value:"EC2 Dedicated Instances",id:"ec2-dedicated-instances",level:3},{value:"EC2 Capacity Reservations",id:"ec2-capacity-reservations",level:3},{value:"AWS charges for IPv4 addresses",id:"aws-charges-for-ipv4-addresses",level:3},{value:"Amazon EC2 \u2013 Instance Storage",id:"amazon-ec2--instance-storage",level:2},{value:"EBS Volumes",id:"ebs-volumes",level:3},{value:"EBS Volume - Example",id:"ebs-volume---example",level:4},{value:"Delete on Termination attribute",id:"delete-on-termination-attribute",level:3},{value:"EBS Snapshots",id:"ebs-snapshots",level:3},{value:"EBS Snapshots Features",id:"ebs-snapshots-features",level:4},{value:"Amazon Machine Image (AMI)",id:"amazon-machine-image-ami",level:3},{value:"AMI Process (from an EC2 instance)",id:"ami-process-from-an-ec2-instance",level:4},{value:"EC2 Instance Store",id:"ec2-instance-store",level:3},{value:"EBS Volume Types",id:"ebs-volume-types",level:3},{value:"EBS Volume Types Use cases",id:"ebs-volume-types-use-cases",level:4},{value:"EBS Multi-Attach \u2013 io1/io2 family",id:"ebs-multi-attach--io1io2-family",level:3},{value:"Amazon EFS \u2013 Elastic File System",id:"amazon-efs--elastic-file-system",level:3},{value:"EFS \u2013 Performance &amp; Storage Classes",id:"efs--performance--storage-classes",level:3},{value:"EFS \u2013 Storage Classes",id:"efs--storage-classes",level:4},{value:"EBS vs EFS \u2013 Elastic Block Storage",id:"ebs-vs-efs--elastic-block-storage",level:3},{value:"EBS",id:"ebs",level:4},{value:"EFS",id:"efs",level:4}];function d(e){const n={a:"a",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"EC2 is the Infrastructure as a Service offering of AWS. It mainly consists in the capability of:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Renting virtual machines (EC2)"}),"\n",(0,i.jsx)(n.li,{children:"Storing data on virtual drives (EBS)"}),"\n",(0,i.jsx)(n.li,{children:"Distributing load across machines (ELB)"}),"\n",(0,i.jsx)(n.li,{children:"Scaling the services using an auto-scaling group (ASG)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ec2-sizing--configuration-options",children:"EC2 sizing & configuration options"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Operating System"}),"\n",(0,i.jsx)(n.li,{children:"CPU"}),"\n",(0,i.jsx)(n.li,{children:"RAM"}),"\n",(0,i.jsxs)(n.li,{children:["Storage","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Network attached (EBS & EFS)"}),"\n",(0,i.jsx)(n.li,{children:"Hardware (EC2 Instance Store)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Network card"}),"\n",(0,i.jsx)(n.li,{children:"Firewall rules"}),"\n",(0,i.jsx)(n.li,{children:"Bootstrap script (configure at first launch): EC2 User Data"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ec2-user-data",children:"EC2 User Data"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It is possible to bootstrap our instances using an EC2 User data script"}),"\n",(0,i.jsx)(n.li,{children:"Bootstrapping means launching commands when a machine starts"}),"\n",(0,i.jsx)(n.li,{children:"That script is only run once at the instance first start"}),"\n",(0,i.jsxs)(n.li,{children:["EC2 user data is used to automate boot tasks such as:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Installing updates"}),"\n",(0,i.jsx)(n.li,{children:"Installing software"}),"\n",(0,i.jsx)(n.li,{children:"Downloading common files from the internet"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"The EC2 User Data Script runs with the root user"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ec2-instance-types",children:"EC2 Instance Types"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"ec2-instance-types",src:s(85307).A+"",width:"1105",height:"441"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["General Purpose","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Great for a diversity of workloads such as web servers or code repositories"}),"\n",(0,i.jsx)(n.li,{children:"Balance between: Compute, Memory, Networking"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Compute Optimized","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Great for compute-intensive tasks that require high performance processors"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Memory Optimized","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Fast performance for workloads that process large data sets in memory"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Storage Optimized","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Great for storage-intensive tasks that require high, sequential read and write access to large data sets on local storage"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"security-groups",children:"Security Groups"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Security Groups are the fundamental of network security in AWS (acting as a firewall)"}),"\n",(0,i.jsxs)(n.li,{children:["They regulate:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Access to Ports"}),"\n",(0,i.jsx)(n.li,{children:"Authorized IP ranges \u2013 IPv4 and IPv6"}),"\n",(0,i.jsx)(n.li,{children:"Control of inbound/outbound network traffic"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Security groups only contain allow rules","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"All inbound traffic is blocked by default"}),"\n",(0,i.jsx)(n.li,{children:"All outbound traffic is authorized by default"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Security groups rules can reference by IP or by security group"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{alt:"security-group-example-1",src:s(88926).A+"",width:"1221",height:"175"}),"\n",(0,i.jsx)(n.img,{alt:"security-group-example-2",src:s(9301).A+"",width:"1164",height:"642"})]}),"\n",(0,i.jsx)(n.p,{children:"Security Groups can be:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Can be attached to multiple instances"}),"\n",(0,i.jsx)(n.li,{children:"Locked down to a region / VPC combination"}),"\n",(0,i.jsx)(n.li,{children:"Does live \u201coutside\u201d the EC2 \u2013 if traffic is blocked the EC2 instance won\u2019t see it"}),"\n",(0,i.jsx)(n.li,{children:"It\u2019s good to maintain one separate security group for SSH access"}),"\n",(0,i.jsx)(n.li,{children:"If your application is not accessible (time out), then it\u2019s a security group issue"}),"\n",(0,i.jsx)(n.li,{children:"If your application gives a \u201cconnection refused\u201c error, then it\u2019s an application error or it\u2019s not launched"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"referencing-other-security-groups---diagram",children:"Referencing other security groups - Diagram"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"referencing-security-groups",src:s(4975).A+"",width:"1167",height:"471"})}),"\n",(0,i.jsx)(n.h3,{id:"classic-ports-to-know",children:"Classic Ports to know"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"21 - FTP"}),"\n",(0,i.jsx)(n.li,{children:"22 - SSH/SFTP"}),"\n",(0,i.jsx)(n.li,{children:"80 - HTTP"}),"\n",(0,i.jsx)(n.li,{children:"443 - HTTPS"}),"\n",(0,i.jsx)(n.li,{children:"3389 RDP (Remote Desktop)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ec2-instances-purchasing-options",children:"EC2 Instances Purchasing Options"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"On-Demand Instances"})," \u2013 short workload, predictable pricing, pay by second"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reserved"})," (1 & 3 years)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reserved Instances"})," \u2013 long workloads"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Convertible Reserved Instances"})," \u2013 long workloads with flexible instances"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Savings Plans"})," (1 & 3 years) \u2013commitment to an amount of usage, long workload"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Spot Instances"})," \u2013 short workloads, cheap, can lose instances (less reliable)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Dedicated Hosts"})," \u2013 book an entire physical server, control instance placement"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Dedicated Instances"})," \u2013 no other customers will share your hardware"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Capacity Reservations"})," \u2013 reserve capacity in a specific AZ for any duration"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ec2-on-demand",children:"EC2 On Demand"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Pay for what you use:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Linux or Windows - billing per second, after the first minute"}),"\n",(0,i.jsx)(n.li,{children:"All other operating systems - billing per hour"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Has the highest cost but no upfront payment"}),"\n",(0,i.jsx)(n.li,{children:"Recommended for short-term and un-interrupted workloads, where you can't predict how the application will behave"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ec2-reserved-instances",children:"EC2 Reserved Instances"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Up to 72% discount compared to On-demand"}),"\n",(0,i.jsxs)(n.li,{children:["You reserve a specific instance attributes (Instance Type, Region, Tenancy, OS)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Reservation Period \u2013 1 year (+discount) or 3 years (+++discount)"}),"\n",(0,i.jsx)(n.li,{children:"Payment Options \u2013 No Upfront (+), Partial Upfront (++), All Upfront (+++)"}),"\n",(0,i.jsx)(n.li,{children:"Reserved Instance\u2019s Scope \u2013 Regional or Zonal (reserve capacity in an AZ)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Recommended for steady-state usage applications (think database)"}),"\n",(0,i.jsx)(n.li,{children:"You can buy and sell in the Reserved Instance Marketplace"}),"\n",(0,i.jsxs)(n.li,{children:["Convertible Reserved Instance","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Can change the EC2 instance type, instance family, OS, scope and tenancy"}),"\n",(0,i.jsx)(n.li,{children:"Up to 66% discount"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ec2-savings-plans",children:"EC2 Savings Plans"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Get a discount based on long-term usage (up to 72% - same as RIs)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Commit to a certain type of usage ($10/hour for 1 or 3 years)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Usage beyond EC2 Savings Plans is billed at the On-Demand price"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Locked to a specific instance family & AWS region (e.g., M5 in us-east-1)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Flexible across:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Instance Size (e.g., m5.xlarge, m5.2xlarge)"}),"\n",(0,i.jsx)(n.li,{children:"OS (e.g., Linux, Windows)"}),"\n",(0,i.jsx)(n.li,{children:"Tenancy (Host, Dedicated, Default)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ec2-spot-instances",children:"EC2 Spot Instances"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Can get a discount of up to 90% compared to On-demand"}),"\n",(0,i.jsx)(n.li,{children:"Instances that you can \u201close\u201d at any point of time if your max price is less than the current spot price"}),"\n",(0,i.jsx)(n.li,{children:"The MOST cost-efficient instances in AWS"}),"\n",(0,i.jsxs)(n.li,{children:["Useful for workloads that are resilient to failure","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Batch jobs"}),"\n",(0,i.jsx)(n.li,{children:"Data analysis"}),"\n",(0,i.jsx)(n.li,{children:"Image processing"}),"\n",(0,i.jsx)(n.li,{children:"Any distributed workloads"}),"\n",(0,i.jsx)(n.li,{children:"Workloads with a flexible start and end time"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Not suitable for critical jobs or databases"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ec2-dedicated-hosts",children:"EC2 Dedicated Hosts"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A physical server with EC2 instance capacity fully dedicated to your use"}),"\n",(0,i.jsxs)(n.li,{children:["Allows you address ",(0,i.jsx)(n.strong,{children:"compliance requirements"})," and ",(0,i.jsx)(n.strong,{children:"use your existing server bound software licenses"})," (per-socket, per-core, per\u2014VM software licenses)"]}),"\n",(0,i.jsxs)(n.li,{children:["Purchasing Options:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"On-demand \u2013 pay per second for active Dedicated Host"}),"\n",(0,i.jsx)(n.li,{children:"Reserved - 1 or 3 years (No Upfront, Partial Upfront, All Upfront)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["The most expensive option","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Useful for software that have complicated licensing model (BYOL \u2013 Bring Your Own License)"}),"\n",(0,i.jsx)(n.li,{children:"Or for companies that have strong regulatory or compliance needs"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ec2-dedicated-instances",children:"EC2 Dedicated Instances"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Instances run on hardware that\u2019s dedicated to you"}),"\n",(0,i.jsx)(n.li,{children:"May share hardware with other instances in same account"}),"\n",(0,i.jsx)(n.li,{children:"No control over instance placement (can move hardware after Stop / Start)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"dedicated-instances",src:s(87869).A+"",width:"475",height:"553"})}),"\n",(0,i.jsx)(n.h3,{id:"ec2-capacity-reservations",children:"EC2 Capacity Reservations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Reserve On-Demand instances capacity in a specific AZ for any duration"}),"\n",(0,i.jsx)(n.li,{children:"No time commitment (create/cancel anytime), no billing discounts"}),"\n",(0,i.jsx)(n.li,{children:"You\u2019re charged at On-Demand rate whether you run instances or not"}),"\n",(0,i.jsxs)(n.li,{children:["Suitable for short-term, uninterrupted workloads that needs to be in a specific AZ","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Combine with Regional Reserved Instances and Savings Plans to benefit from billing discounts"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"aws-charges-for-ipv4-addresses",children:"AWS charges for IPv4 addresses"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Starting February 1st 2024, there\u2019s a charge for all Public IPv4 created in your account"}),"\n",(0,i.jsx)(n.li,{children:"$0.005 per hour of Public IPv4 (~ $3.6 per month)"}),"\n",(0,i.jsx)(n.li,{children:"RDS and Load Balancers have one public ipv4 per AZ"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"amazon-ec2--instance-storage",children:"Amazon EC2 \u2013 Instance Storage"}),"\n",(0,i.jsx)(n.h3,{id:"ebs-volumes",children:"EBS Volumes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["An EBS (Elastic Block Store) Volume is a network drive (i.e. not a physical drive) you can attach to your instances while they run","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It uses the network to communicate the instance, which means there might be a bit of latency"}),"\n",(0,i.jsx)(n.li,{children:"It can be detached from an EC2 instance and attached to another one quickly"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"It allows your instances to persist data, even after their termination"}),"\n",(0,i.jsx)(n.li,{children:"They can only be mounted to one instance at a time (at the CCP level)"}),"\n",(0,i.jsxs)(n.li,{children:["It\u2019s locked to an Availability Zone (AZ)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"An EBS Volume in us-east-1a cannot be attached to us-east-1b"}),"\n",(0,i.jsx)(n.li,{children:"To move a volume across, you first need to snapshot it"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Have a provisioned capacity (size in GBs, and IOPS)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You can increase the capacity of the drive over time"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"ebs-volume---example",children:"EBS Volume - Example"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"ebs-volume",src:s(45582).A+"",width:"1093",height:"498"})}),"\n",(0,i.jsx)(n.h3,{id:"delete-on-termination-attribute",children:"Delete on Termination attribute"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Controls the EBS behaviour when an EC2 instance terminates","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"By default, the root EBS volume is deleted (attribute enabled)"}),"\n",(0,i.jsx)(n.li,{children:"By default, any other attached EBS volume is not deleted (attribute disabled)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"This can be controlled by the AWS console / AWS CLI"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ebs-snapshots",children:"EBS Snapshots"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Make a backup (snapshot) of your EBS volume at a point in time"}),"\n",(0,i.jsx)(n.li,{children:"Not necessary to detach volume to do snapshot, but recommended"}),"\n",(0,i.jsx)(n.li,{children:"Can copy snapshots across AZ or Region"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"snapshot-example",src:s(6972).A+"",width:"916",height:"310"})}),"\n",(0,i.jsx)(n.h4,{id:"ebs-snapshots-features",children:"EBS Snapshots Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"EBS Snapshot Archive:"})," cheaper storage but takes 24-72 hours to restore"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Recycle Bin:"})," Setup rules to retain deleted snapshots so you can recover them after an accidental deletion with a specified retention window (from 1 day to 1 year)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fast Snapshot Restore (FSR):"})," Force full initialization of snapshot to have no latency on the first use ($$$)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"amazon-machine-image-ami",children:"Amazon Machine Image (AMI)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["AMI are a customization of an EC2 instance","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You add your own software, configuration, operating system, monitoring..."}),"\n",(0,i.jsx)(n.li,{children:"Faster boot / configuration time because all your software is pre-packaged"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"AMI are built for a specific region (and can be copied across regions)"}),"\n",(0,i.jsxs)(n.li,{children:["You can launch EC2 instances from:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A Public AMI: AWS provided"}),"\n",(0,i.jsx)(n.li,{children:"Your own AMI: you make and maintain them yourself"}),"\n",(0,i.jsx)(n.li,{children:"An AWS Marketplace AMI: an AMI someone else made (e.g. ELK)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"ami-process-from-an-ec2-instance",children:"AMI Process (from an EC2 instance)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Start an EC2 instance and customize it"}),"\n",(0,i.jsx)(n.li,{children:"Stop the instance (for data integrity)"}),"\n",(0,i.jsx)(n.li,{children:"Build an AMI \u2013 this will also create EBS snapshots"}),"\n",(0,i.jsx)(n.li,{children:"Launch instances from other AMIs"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"ami-workflow",src:s(15918).A+"",width:"856",height:"196"})}),"\n",(0,i.jsx)(n.h3,{id:"ec2-instance-store",children:"EC2 Instance Store"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"EBS volumes are network drives with good but \u201climited\u201d performance"}),"\n",(0,i.jsxs)(n.li,{children:["If you need a high-performance hardware disk, use EC2 Instance Store","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Better I/O performance (very high IOPS)"}),"\n",(0,i.jsx)(n.li,{children:"EC2 Instance Store lose their storage if they\u2019re stopped (ephemeral)"}),"\n",(0,i.jsx)(n.li,{children:"Good for buffer / cache / scratch data / temporary content"}),"\n",(0,i.jsx)(n.li,{children:"Risk of data loss if hardware fails"}),"\n",(0,i.jsx)(n.li,{children:"Backups and Replication are your responsibility"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ebs-volume-types",children:"EBS Volume Types"}),"\n",(0,i.jsx)(n.p,{children:"EBS Volumes are characterized in Size | Throughput | IOPS (I/O Ops Per Sec).\nEBS Volumes come in 6 types:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"gp2 / gp3 (SSD):"})," General purpose SSD volume that balances price and performance for a wide variety of workloads"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"io1 / io2 Block Express (SSD):"})," Highest-performance SSD volume for mission-critical low-latency or high-throughput workloads"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"st1 (HDD):"})," Low cost HDD volume designed for frequently accessed, throughput intensive workloads"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"sc1 (HDD):"})," Lowest cost HDD volume designed for less frequently accessed workloads"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Only gp2/gp3 and io1/io2 Block Express can be used as boot volumes!"}),"\n",(0,i.jsx)(n.h4,{id:"ebs-volume-types-use-cases",children:"EBS Volume Types Use cases"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["General Purpose SSD","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"1 GiB - 16 TiB"}),"\n",(0,i.jsx)(n.li,{children:"Cost effective storage, low-latency"}),"\n",(0,i.jsx)(n.li,{children:"Good for: System boot volumes, Virtual desktops, Development and test environment"}),"\n",(0,i.jsxs)(n.li,{children:["gp3: Baseline of 3,000 IOPS and throughput of 125 MiB/s | ",(0,i.jsx)(n.strong,{children:"Can increase IOPS"})," up to 16,000 and throughput up to 1000 MiB/s ",(0,i.jsx)(n.strong,{children:"independently"})]}),"\n",(0,i.jsxs)(n.li,{children:["gp2: Small gp2 volumes can burst IOPS to 3,000 | ",(0,i.jsx)(n.strong,{children:"Size of the volume and IOPS are linked"}),", max IOPS is 16,000"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Provisioned IOPS (PIOPS) SSD","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Critical business applications with sustained IOPS performance"}),"\n",(0,i.jsx)(n.li,{children:"Or applications that need more than 16,000 IOPS"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Great for databases workloads (sensitive to storage perf and consistency)"})}),"\n",(0,i.jsx)(n.li,{children:"io1 (4 GiB - 16 TiB): Max PIOPS: 64,000 | Can increase PIOPS independently from storage size"}),"\n",(0,i.jsx)(n.li,{children:"io2 Block Express (4 GiB \u2013 64 TiB): Sub-millisecond latency | Max PIOPS: 256,000"}),"\n",(0,i.jsx)(n.li,{children:"Supports EBS Multi-attach"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Hard Disk Drives (HDD)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cannot be a boot volume"}),"\n",(0,i.jsx)(n.li,{children:"125 GiB to 16 TiB"}),"\n",(0,i.jsx)(n.li,{children:"st1: Throughput Optimized HDD for Big Data, Data Warehouses, Log Processing | Max throughput 500 MiB/s \u2013 max IOPS 500"}),"\n",(0,i.jsx)(n.li,{children:"sc1: Cold HDD for data that is infrequently accessed | Max throughput 250 MiB/s \u2013 max IOPS 250 | low cost"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Volume Summary: ",(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/ebs/latest/userguide/ebs-volume-types.html",children:"AWS Docs"})]}),"\n",(0,i.jsx)(n.h3,{id:"ebs-multi-attach--io1io2-family",children:"EBS Multi-Attach \u2013 io1/io2 family"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Attach the same EBS volume to multiple EC2 instances in the same AZ"}),"\n",(0,i.jsx)(n.li,{children:"Each instance has full read & write permissions to the high-performance volume"}),"\n",(0,i.jsxs)(n.li,{children:["Use case:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Achieve higher application availability in clustered Linux applications (ex: Teradata)"}),"\n",(0,i.jsx)(n.li,{children:"Applications must manage concurrent write operations"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Up to 16 EC2 Instances at a time (relevant for exam)"})}),"\n",(0,i.jsx)(n.li,{children:"Must use a file system that\u2019s cluster-aware (not XFS, EXT4, etc\u2026)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"amazon-efs--elastic-file-system",children:"Amazon EFS \u2013 Elastic File System"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Managed NFS (network file system) that can be mounted on many EC2"}),"\n",(0,i.jsx)(n.li,{children:"EFS works with EC2 instances in multi-AZ"}),"\n",(0,i.jsx)(n.li,{children:"Highly available, scalable, expensive (3x gp2), pay per use"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"elastic-file-system",src:s(17231).A+"",width:"616",height:"337"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use cases: content management, web serving, data sharing, Wordpress"}),"\n",(0,i.jsx)(n.li,{children:"Uses NFSv4.1 protocol"}),"\n",(0,i.jsx)(n.li,{children:"Uses security group to control access to EFS"}),"\n",(0,i.jsx)(n.li,{children:"Compatible with Linux based AMI (not Windows)"}),"\n",(0,i.jsx)(n.li,{children:"Encryption at rest using KMS"}),"\n",(0,i.jsx)(n.li,{children:"POSIX file system (~Linux) that has a standard file API"}),"\n",(0,i.jsx)(n.li,{children:"File system scales automatically, pay-per-use, no capacity planning!"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"efs--performance--storage-classes",children:"EFS \u2013 Performance & Storage Classes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["EFS Scale","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"1000s of concurrent NFS clients, 10 GB+ /s throughput"}),"\n",(0,i.jsx)(n.li,{children:"Grow to Petabyte-scale network file system, automatically"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Performance Mode (set at EFS creation time)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"General Purpose (default) \u2013 latency-sensitive use cases (web server, CMS, etc\u2026)"}),"\n",(0,i.jsx)(n.li,{children:"Max I/O \u2013 higher latency, throughput, highly parallel (big data, media processing)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Throughput Mode","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Bursting \u2013 1 TB = 50MiB/s + burst of up to 100MiB/s"}),"\n",(0,i.jsx)(n.li,{children:"Provisioned \u2013 set your throughput regardless of storage size, ex: 1 GiB/s for 1 TB storage"}),"\n",(0,i.jsxs)(n.li,{children:["Elastic \u2013 automatically scales throughput up or down based on your workloads","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Up to 3GiB/s for reads and 1GiB/s for writes"}),"\n",(0,i.jsx)(n.li,{children:"Used for unpredictable workloads"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"efs--storage-classes",children:"EFS \u2013 Storage Classes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Storage Tiers (lifecycle management feature \u2013 move file after N days):","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Standard: for frequently accessed files"}),"\n",(0,i.jsx)(n.li,{children:"Infrequent access (EFS-IA): cost to retrieve files, lower price to store"}),"\n",(0,i.jsx)(n.li,{children:"Archive: rarely accessed data (few times each year), 50% cheaper"}),"\n",(0,i.jsx)(n.li,{children:"Implement lifecycle policies to move files between storage tiers"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Availability and durability","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Standard: Multi-AZ, great for prod"}),"\n",(0,i.jsx)(n.li,{children:"One Zone: One AZ, great for dev, backup enabled by default, compatible with IA (EFS One Zone-IA)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Over 90% in cost savings"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"efs-storage",src:s(63373).A+"",width:"409",height:"547"})}),"\n",(0,i.jsx)(n.h3,{id:"ebs-vs-efs--elastic-block-storage",children:"EBS vs EFS \u2013 Elastic Block Storage"}),"\n",(0,i.jsx)(n.h4,{id:"ebs",children:"EBS"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["EBS volumes","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"one instance (except multi-attach io1/io2)"}),"\n",(0,i.jsx)(n.li,{children:"are locked at the Availability Zone (AZ) level"}),"\n",(0,i.jsx)(n.li,{children:"gp2: IO increases if the disk size increases"}),"\n",(0,i.jsx)(n.li,{children:"gp3 & io1: can increase IO independently"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["To migrate an EBS volume across AZ","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Take a snapshot"}),"\n",(0,i.jsx)(n.li,{children:"Restore the snapshot to another AZ"}),"\n",(0,i.jsx)(n.li,{children:"EBS backups use IO and you shouldn\u2019t run them while your application is handling a lot of traffic"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Root EBS Volumes of instances get terminated by default if the EC2 instance gets terminated"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"efs",children:"EFS"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Mounting 100s of instances across AZ"}),"\n",(0,i.jsx)(n.li,{children:"EFS share website files (WordPress)"}),"\n",(0,i.jsx)(n.li,{children:"Only for Linux Instances (POSIX)"}),"\n",(0,i.jsx)(n.li,{children:"EFS has a higher price point than EBS"}),"\n",(0,i.jsx)(n.li,{children:"Can leverage Storage Tiers for cost savings"}),"\n",(0,i.jsx)(n.li,{children:"Remember: EFS vs EBS vs Instance Store"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"ebs-vs-efs",src:s(65934).A+"",width:"430",height:"492"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},15918:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/ami-workflow-031d1faa486b514b22df95bf12d5aa1f.png"},87869:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/dedicated-instances-10be908bede8e747e4a61079b1f92d61.png"},45582:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/ebs-volume-09465175a183cf8c5e355f2e51b24249.png"},65934:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/ebs-vs-efs-27a977fee2e9052c8117137961d59ef6.png"},85307:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/ec2-instance-types-46e3fcaad287be27ffc78ceca7d5b228.png"},63373:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/efs-storage-62c8cd4712d12736790c4dc713689e23.png"},17231:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/elastic-file-system-f17e6bac0ffe040fbccc095ffc7cab51.png"},4975:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/referencing-security-groups-66ae6020c4ab495908ca38ab2880d7f4.png"},88926:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/security-group-example-1-02b92ea4c94cde309813e767b8ec568c.png"},9301:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/security-group-example-2-e2edfb402d7216a938103656796f8dbe.png"},6972:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/snapshot-example-8103289027f6d09ff5a9a45d145d30b5.png"},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var i=s(96540);const l={},r=i.createContext(l);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);