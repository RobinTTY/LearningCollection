"use strict";(self.webpackChunklearning_knowledge_base=self.webpackChunklearning_knowledge_base||[]).push([[1868],{58809:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>c,toc:()=>i});var n=t(74848),o=t(28453);const s={id:"controllers",title:"Controllers"},l=void 0,c={id:"csharp/asp-net/core-concepts/controllers",title:"Controllers",description:"Controllers in a web API are classes that derive from ControllerBase. Controllers are activated and disposed on a per request basis.",source:"@site/docs/csharp/asp-net/core-concepts/controllers.md",sourceDirName:"csharp/asp-net/core-concepts",slug:"/csharp/asp-net/core-concepts/controllers",permalink:"/LearningCollection/csharp/asp-net/core-concepts/controllers",draft:!1,unlisted:!1,editUrl:"https://github.com/RobinTTY/LearningCollection/tree/master/website/docs/csharp/asp-net/core-concepts/controllers.md",tags:[],version:"current",frontMatter:{id:"controllers",title:"Controllers"},sidebar:"docs",previous:{title:"Routing",permalink:"/LearningCollection/csharp/asp-net/core-concepts/routing"},next:{title:"Parameter Binding",permalink:"/LearningCollection/csharp/asp-net/core-concepts/parameter-binding"}},a={},i=[{value:"<code>ControllerBase</code> class",id:"controllerbase-class",level:2},{value:"<code>ApiController</code> attribute",id:"apicontroller-attribute",level:2}];function d(e){const r={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.p,{children:["Controllers in a web API are classes that derive from ",(0,n.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.controllerbase",children:(0,n.jsx)(r.code,{children:"ControllerBase"})}),". Controllers are activated and disposed on a per request basis."]}),"\n",(0,n.jsxs)(r.h2,{id:"controllerbase-class",children:[(0,n.jsx)(r.code,{children:"ControllerBase"})," class"]}),"\n",(0,n.jsxs)(r.p,{children:["A controller-based web API consists of one or more controller classes that derive from ",(0,n.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.controllerbase",children:(0,n.jsx)(r.code,{children:"ControllerBase"})}),". The web API project template provides a starter controller:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csharp",children:'[ApiController]\n[Route("[controller]")]\npublic class WeatherForecastController : ControllerBase\n'})}),"\n",(0,n.jsxs)(r.p,{children:["Web API controllers should typically derive from ",(0,n.jsx)(r.code,{children:"ControllerBase"})," rather than from ",(0,n.jsx)(r.code,{children:"Controller"}),". Controller derives from ",(0,n.jsx)(r.code,{children:"ControllerBase"})," and adds support for views, so it's for handling web pages, not web API requests."]}),"\n",(0,n.jsxs)(r.p,{children:["The ",(0,n.jsx)(r.code,{children:"ControllerBase"})," class provides many properties and methods that are useful for handling HTTP requests. For example, ",(0,n.jsx)(r.code,{children:"CreatedAtAction"})," returns a 201 status code:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csharp",children:"[HttpPost]\n[ProducesResponseType(StatusCodes.Status201Created)]\n[ProducesResponseType(StatusCodes.Status400BadRequest)]\npublic ActionResult<Pet> Create(Pet pet)\n{\n    pet.Id = _petsInMemoryStore.Any() ?\n             _petsInMemoryStore.Max(p => p.Id) + 1 : 1;\n    _petsInMemoryStore.Add(pet);\n\n    return CreatedAtAction(nameof(GetById), new { id = pet.Id }, pet);\n}\n"})}),"\n",(0,n.jsxs)(r.h2,{id:"apicontroller-attribute",children:[(0,n.jsx)(r.code,{children:"ApiController"})," attribute"]}),"\n",(0,n.jsxs)(r.p,{children:["The ",(0,n.jsx)(r.code,{children:"[ApiController]"})," attribute can be applied to a controller class to enable the following opinionated, API-specific behaviors:"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/aspnet/core/web-api/?view=aspnetcore-8.0#attribute-routing-requirement",children:"Attribute routing requirement"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/aspnet/core/web-api/?view=aspnetcore-8.0#automatic-http-400-responses",children:"Automatic HTTP 400 responses"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/aspnet/core/web-api/?view=aspnetcore-8.0#binding-source-parameter-inference",children:"Binding source parameter inference"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/aspnet/core/web-api/?view=aspnetcore-8.0#multipartform-data-request-inference",children:"Multipart/form-data request inference"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/aspnet/core/web-api/?view=aspnetcore-8.0#problem-details-for-error-status-codes",children:"Problem details for error status codes"})}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"Example:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csharp",children:'[ApiController]\n[Route("[controller]")]\npublic class WeatherForecastController : ControllerBase\n'})})]})}function p(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,r,t)=>{t.d(r,{R:()=>l,x:()=>c});var n=t(96540);const o={},s=n.createContext(o);function l(e){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);