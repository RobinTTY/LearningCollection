"use strict";(self.webpackChunklearning_knowledge_base=self.webpackChunklearning_knowledge_base||[]).push([[3668],{78549:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"cloud/aws/certified-developer-associate/cloud-development-kit","title":"Cloud Development Kit","description":"- Define your cloud infrastructure using a familiar language:","source":"@site/docs/cloud/aws/certified-developer-associate/cloud-development-kit.md","sourceDirName":"cloud/aws/certified-developer-associate","slug":"/cloud/aws/certified-developer-associate/cloud-development-kit","permalink":"/LearningCollection/cloud/aws/certified-developer-associate/cloud-development-kit","draft":false,"unlisted":false,"editUrl":"https://github.com/RobinTTY/LearningCollection/tree/master/website/docs/cloud/aws/certified-developer-associate/cloud-development-kit.md","tags":[],"version":"current","sidebarPosition":22,"frontMatter":{"title":"Cloud Development Kit","sidebar_position":22},"sidebar":"docs","previous":{"title":"SAM","permalink":"/LearningCollection/cloud/aws/certified-developer-associate/sam"},"next":{"title":"Cognito","permalink":"/LearningCollection/cloud/aws/certified-developer-associate/cognito"}}');var i=s(74848),r=s(28453);const l={title:"Cloud Development Kit",sidebar_position:22},c=void 0,o={},a=[{value:"CDK in a diagram",id:"cdk-in-a-diagram",level:2},{value:"CDK vs SAM",id:"cdk-vs-sam",level:2},{value:"CDK + SAM",id:"cdk--sam",level:3},{value:"CDK Constructs",id:"cdk-constructs",level:2},{value:"Layer 1 Constructs (L1)",id:"layer-1-constructs-l1",level:3},{value:"Layer 2 Constructs (L2)",id:"layer-2-constructs-l2",level:3},{value:"Layer 3 Constructs (L3)",id:"layer-3-constructs-l3",level:3},{value:"Important Commands to know",id:"important-commands-to-know",level:2},{value:"Bootstrapping",id:"bootstrapping",level:2},{value:"Testing",id:"testing",level:2}];function d(e){const n={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Define your cloud infrastructure using a familiar language:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"JavaScript/TypeScript, Python, Java, and .NET"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Contains high level components called constructs"}),"\n",(0,i.jsx)(n.li,{children:"The code is \u201ccompiled\u201d into a CloudFormation template (JSON/YAML)"}),"\n",(0,i.jsxs)(n.li,{children:["You can therefore deploy infrastructure and application runtime code together","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Great for Lambda functions"}),"\n",(0,i.jsx)(n.li,{children:"Great for Docker containers in ECS / EKS"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"aws-cdk-ex",src:s(16083).A+"",width:"835",height:"718"})}),"\n",(0,i.jsx)(n.h2,{id:"cdk-in-a-diagram",children:"CDK in a diagram"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"cdk-overview",src:s(92885).A+"",width:"1687",height:"655"})}),"\n",(0,i.jsx)(n.h2,{id:"cdk-vs-sam",children:"CDK vs SAM"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["SAM:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Serverless focused"}),"\n",(0,i.jsx)(n.li,{children:"Write your template declaratively in JSON or YAML"}),"\n",(0,i.jsx)(n.li,{children:"Great for quickly getting started with Lambda"}),"\n",(0,i.jsx)(n.li,{children:"Leverages CloudFormation"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["CDK:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"All AWS services"}),"\n",(0,i.jsx)(n.li,{children:"Write infra in a programming language JavaScript/TypeScript, Python, Java, and .NET"}),"\n",(0,i.jsx)(n.li,{children:"Leverages CloudFormation"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"cdk--sam",children:"CDK + SAM"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You can use SAM CLI to locally test your CDK apps"}),"\n",(0,i.jsx)(n.li,{children:"You must first run cdk synth"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"cdk-and-sam",src:s(38451).A+"",width:"1656",height:"433"})}),"\n",(0,i.jsx)(n.h2,{id:"cdk-constructs",children:"CDK Constructs"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"CDK Construct is a component that encapsulates everything CDK needs to create the final CloudFormation stack"}),"\n",(0,i.jsx)(n.li,{children:"Can represent a single AWS resource (e.g., S3 bucket) or multiple related resources (e.g., worker queue with compute)"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AWS Construct Library"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A collection of Constructs included in AWS CDK which contains Constructs for every AWS resource"}),"\n",(0,i.jsx)(n.li,{children:"Contains 3 different levels of Constructs available (L1, L2, L3)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Construct Hub"})," \u2013 contains additional Constructs from AWS, 3rd parties, and open-source CDK community"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"layer-1-constructs-l1",children:"Layer 1 Constructs (L1)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Can be called CFN Resources which represents all resources directly available in CloudFormation"}),"\n",(0,i.jsx)(n.li,{children:"Constructs are periodically generated from CloudFormation Resource Specification"}),"\n",(0,i.jsx)(n.li,{children:"Construct names start with Cfn (e.g., CfnBucket)"}),"\n",(0,i.jsx)(n.li,{children:"You must explicitly configure all resource proper ties"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const bucket = new s3.CfnBucket(this, "MyBucket", { bucketName: "MyBucket" });\n'})}),"\n",(0,i.jsx)(n.h3,{id:"layer-2-constructs-l2",children:"Layer 2 Constructs (L2)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Represents AWS resources but with a higher level (intent-based API)"}),"\n",(0,i.jsxs)(n.li,{children:["Similar functionality as L1 but with convenient defaults and boilerplate","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You don\u2019t need to know all the details about the resource proper ties"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Provide methods that make it simpler to work with the resource (e.g., bucket.addLifeCycleRule())"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const s3 = require("aws-cdk-lib/aws-s3");\nconst bucket = new s3.Bucket(this, "MyBucket", {\n  versioned: true,\n  encryption: s3.BucketEncryption.KMS,\n});\n\n// Returns the HTTPS URL of an S3 object\nconst objectUrl = bucket.urlForObject("MyBucket/MyObject");\n'})}),"\n",(0,i.jsx)(n.h3,{id:"layer-3-constructs-l3",children:"Layer 3 Constructs (L3)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Can be called Patterns, which represents multiple related resources"}),"\n",(0,i.jsx)(n.li,{children:"Helps you complete common tasks in AWS"}),"\n",(0,i.jsxs)(n.li,{children:["Examples:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"aws-apigateway.LambdaRestApi"})," represents an API Gateway backed by a Lambda function"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"aws-ecs-patterns.ApplicationLoadBalancerFargateService"})," which represents an architecture that includes a Fargate cluster with Application Load Balancer"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const api = new apigateway.LambdaRestApi(this, "myapi", {\n  handler: backend,\n  proxy: false,\n});\n\nconst items = api.root.addResource("items");\nitems.addMethod("GET"); // GET /items\nitems.addMethod("POST"); // POST /items\n\nconst item = items.addResource("{item}");\nitem.addMethod("GET"); // GET /items/{item}\n\nitem.addMethod("DELETE", new apigateway.HttpIntegration("http://amazon.com"));\n'})}),"\n",(0,i.jsx)(n.h2,{id:"important-commands-to-know",children:"Important Commands to know"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"cdk-commands",src:s(57234).A+"",width:"1363",height:"607"})}),"\n",(0,i.jsx)(n.h2,{id:"bootstrapping",children:"Bootstrapping"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The process of provisioning resources for CDK before you can deploy CDK apps into an AWSenvironment"}),"\n",(0,i.jsx)(n.li,{children:"AWS Environment = account & region"}),"\n",(0,i.jsxs)(n.li,{children:["CloudFormation Stack called CDKToolkit is created and contains:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"S3 Bucket \u2013 to store files"}),"\n",(0,i.jsx)(n.li,{children:"IAM Roles \u2013 to grant permissions to perform deployments"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["You must run the following command for each new environment:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"cdk bootstrap aws://<aws_account>/<aws_region>"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Otherwise, you will get an error \u201cPolicy contains a statement with one or more invalid principal\u201d"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"cdk-bootstrapping",src:s(98452).A+"",width:"547",height:"862"})}),"\n",(0,i.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"To test CDK apps, use CDK Assertions Module combined with popular test frameworks such as Jest (JavaScript) or Pytest (Python)"}),"\n",(0,i.jsx)(n.li,{children:"Verify we have specific resources, rules, conditions, parameters\u2026"}),"\n",(0,i.jsxs)(n.li,{children:["Two types of tests:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Fine-grained Assertions (common) \u2013 test specific aspects of the CloudFormation template (e.g., check if a resource has this property with this value)"}),"\n",(0,i.jsx)(n.li,{children:"Snapshot Tests \u2013 test the synthesized CloudFormation template against a previously stored baseline template"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["To import a template","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Template.fromStack(MyStack) : stack built in CDK"}),"\n",(0,i.jsx)(n.li,{children:"Template.fromString(mystring) : stack build outside CDK"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"cdk-testing",src:s(48098).A+"",width:"757",height:"595"})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},16083:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/aws-cdk-ex-81fe2d38889df34733e7d931f902b133.png"},38451:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/cdk-and-sam-7351b5600097c3c4b882b65fd048f265.png"},98452:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/cdk-bootstrapping-2adb5f01419d5ba5de3df759c00dae40.png"},57234:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/cdk-commands-b2ff927df24b528c5d053a7d8ba81189.png"},92885:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/cdk-overview-7106484519318ff61f33293b4872905f.png"},48098:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/cdk-testing-25ff580bf612273f88ca0f387ebd3d58.png"},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var t=s(96540);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);