"use strict";(self.webpackChunklearning_knowledge_base=self.webpackChunklearning_knowledge_base||[]).push([[1305],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return c}});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),u=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),h=u(a),c=l,m=h["".concat(s,".").concat(c)]||h[c]||d[c]||i;return a?n.createElement(m,o(o({ref:t},p),{},{components:a})):n.createElement(m,o({ref:t},p))}));function c(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=a.length,o=new Array(i);o[0]=h;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:l,o[1]=r;for(var u=2;u<i;u++)o[u]=a[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},1390:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return r},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return p},default:function(){return h}});var n=a(7462),l=a(3366),i=(a(7294),a(3905)),o=["components"],r={id:"notesOnJekyll",title:"Notes on Jekyll"},s=void 0,u={unversionedId:"Web/Jekyll/notesOnJekyll",id:"Web/Jekyll/notesOnJekyll",isDocsHomePage:!1,title:"Notes on Jekyll",description:"Jekyll is a simple, extendable, static site generator. Given text written in a supported markup language it churns through layouts to create a static website. Throughout that process you can tweak how you want the site URLs to look, what data gets displayed in the layout, and more.",source:"@site/docs/Web/Jekyll/notes.md",sourceDirName:"Web/Jekyll",slug:"/Web/Jekyll/notesOnJekyll",permalink:"/LearningCollection/Web/Jekyll/notesOnJekyll",editUrl:"https://github.com/RobinTTY/LearningCollection/tree/master/website/docs/Web/Jekyll/notes.md",tags:[],version:"current",frontMatter:{id:"notesOnJekyll",title:"Notes on Jekyll"},sidebar:"mySidebar",previous:{title:"JavaScript",permalink:"/LearningCollection/Web/JavaScript/javascript"},next:{title:"Basics",permalink:"/LearningCollection/Web/React/basics"}},p=[{value:"Creating a new project",id:"creating-a-new-project",children:[]},{value:"Building a site",id:"building-a-site",children:[]},{value:"1. Directory Structure",id:"1-directory-structure",children:[{value:"No database",id:"no-database",children:[]}]},{value:"2. Liquid",id:"2-liquid",children:[{value:"Objects",id:"objects",children:[]},{value:"Tags",id:"tags",children:[]},{value:"Filters",id:"filters",children:[]},{value:"Small example of using Liquid",id:"small-example-of-using-liquid",children:[]}]},{value:"3. Front Matter",id:"3-front-matter",children:[]},{value:"4. Layouts",id:"4-layouts",children:[{value:"Creating a layout",id:"creating-a-layout",children:[]}]},{value:"5. Includes",id:"5-includes",children:[{value:"Include tag",id:"include-tag",children:[]},{value:"Include usage",id:"include-usage",children:[]},{value:"Current page highlighting",id:"current-page-highlighting",children:[]}]},{value:"6. Data Files",id:"6-data-files",children:[{value:"Data file usage",id:"data-file-usage",children:[]}]},{value:"7. Assets",id:"7-assets",children:[{value:"Sass",id:"sass",children:[]}]},{value:"8. Blogging",id:"8-blogging",children:[{value:"Posts",id:"posts",children:[]},{value:"Layout",id:"layout",children:[]},{value:"List posts",id:"list-posts",children:[]},{value:"More posts",id:"more-posts",children:[]}]},{value:"9. Collections",id:"9-collections",children:[{value:"Configuration",id:"configuration",children:[]},{value:"Add authors",id:"add-authors",children:[]},{value:"Staff page",id:"staff-page",children:[]},{value:"Output a page",id:"output-a-page",children:[]},{value:"Front matter defaults",id:"front-matter-defaults",children:[]},{value:"List author\u2019s posts",id:"list-authors-posts",children:[]},{value:"Link to authors page",id:"link-to-authors-page",children:[]}]},{value:"10. Deployment",id:"10-deployment",children:[{value:"Gemfile",id:"gemfile",children:[]},{value:"Plugins",id:"plugins",children:[]},{value:"Environments",id:"environments",children:[]},{value:"Deployment",id:"deployment",children:[]}]},{value:"Variables",id:"variables",children:[{value:"Global Variables",id:"global-variables",children:[]},{value:"Site Variables",id:"site-variables",children:[]},{value:"Page Variables",id:"page-variables",children:[]},{value:"Paginator Variables",id:"paginator-variables",children:[]}]}],d={toc:p};function h(e){var t=e.components,r=(0,l.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Jekyll is a simple, extendable, static site generator. Given text written in a supported markup language it churns through layouts to create a static website. Throughout that process you can tweak how you want the site URLs to look, what data gets displayed in the layout, and more."),(0,i.kt)("h2",{id:"creating-a-new-project"},"Creating a new project"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-CLI"},"jekyll new <sitename>\n")),(0,i.kt)("h2",{id:"building-a-site"},"Building a site"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-CLI"},"bundle exec jekyll serve\n")),(0,i.kt)("p",null,"Site will be served to ",(0,i.kt)("a",{parentName:"p",href:"http://localhost:4000"},"localhost"),". Site will be rebuild upon changes."),(0,i.kt)("h2",{id:"1-directory-structure"},"1. Directory Structure"),(0,i.kt)("p",null,"A basic Jekyll site usually looks something like this:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"DirectoryStructure",src:a(2553).Z})),(0,i.kt)("p",null,"What each of these does:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"DirectoryExplanation",src:a(9914).Z})),(0,i.kt)("h3",{id:"no-database"},"No database"),(0,i.kt)("p",null,"One of the great things about Jekyll is there\u2019s no database. All content and site structure are files which a Git repository can version."),(0,i.kt)("h2",{id:"2-liquid"},"2. Liquid"),(0,i.kt)("p",null,"Liquid is where Jekyll starts to get more interesting. Liquid is a templating language which has three main parts:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://jekyllrb.com/docs/step-by-step/02-liquid/#objects"},"objects")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://jekyllrb.com/docs/step-by-step/02-liquid/#tags"},"tags")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://jekyllrb.com/docs/step-by-step/02-liquid/#filters"},"filters"))),(0,i.kt)("h3",{id:"objects"},"Objects"),(0,i.kt)("p",null,"Objects tell Liquid where to output content. They're denoted by double curly braces: ",(0,i.kt)("inlineCode",{parentName:"p"},"{{")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"}}"),". For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-liquid"},"{{ page.title }}\n")),(0,i.kt)("p",null,"Outputs a variable called ",(0,i.kt)("inlineCode",{parentName:"p"},"page.title")," on the page."),(0,i.kt)("h3",{id:"tags"},"Tags"),(0,i.kt)("p",null,"Tags create the logic and control flow for templates. They are denoted by curly braces and percent signs: ",(0,i.kt)("inlineCode",{parentName:"p"},"{%")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"%}"),". For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-liquid"},'{% if page.show_sidebar %}\n  <div class="sidebar">\n    sidebar content\n  </div>\n{% endif %}\n')),(0,i.kt)("p",null,"Outputs the sidebar if ",(0,i.kt)("inlineCode",{parentName:"p"},"page.show_sidebar")," is true. ",(0,i.kt)("a",{parentName:"p",href:"https://jekyllrb.com/docs/liquid/tags/"},"Available Tags")),(0,i.kt)("h3",{id:"filters"},"Filters"),(0,i.kt)("p",null,"Filters change the output of a Liquid object. They are used within an output and are separated by a ",(0,i.kt)("inlineCode",{parentName:"p"},"|"),". For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-liquid"},'{{ "hi" | capitalize }}\n')),(0,i.kt)("p",null,"Outputs ",(0,i.kt)("inlineCode",{parentName:"p"},"Hi"),". ",(0,i.kt)("a",{parentName:"p",href:"https://jekyllrb.com/docs/liquid/filters/"},"More Information")),(0,i.kt)("h3",{id:"small-example-of-using-liquid"},"Small example of using Liquid"),(0,i.kt)("p",null,"In an html file we could use:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-liquid"},'...\n<h1>{{ "Hello World!" | downcase }}</h1>\n...\n')),(0,i.kt)("p",null,"To get our changes processed by Jekyll we need to add ",(0,i.kt)("a",{parentName:"p",href:"https://jekyllrb.com/docs/front-matter/"},"front matter")," to the top of the page:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"---\n# the 3 dashes (front matter) tell Jekyll to process Liquid\n---\n")),(0,i.kt)("p",null,'The "Hello World!" will now be downcased on render.'),(0,i.kt)("h2",{id:"3-front-matter"},"3. Front Matter"),(0,i.kt)("p",null,"Front matter is a snippet of YAML which sits between two triple-dashed lines at the top of a file. Front matter is used to set variables for the page, for example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"---\nmy_number: 5\n---\n")),(0,i.kt)("p",null,"Front matter variables are available in Liquid under the page variable. For example to output the variable above you would use:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-liquid"},"{{ page.my_number }}\n")),(0,i.kt)("h2",{id:"4-layouts"},"4. Layouts"),(0,i.kt)("p",null,"Websites typically have more than one page. Jekyll supports ",(0,i.kt)("a",{parentName:"p",href:"https://daringfireball.net/projects/markdown/syntax"},"Markdown")," as well as HTML for pages."),(0,i.kt)("p",null,"Markdown is a great choice for pages with a simple content structure (just paragraphs, headings and images), as it\u2019s less verbose than raw HTML."),(0,i.kt)("p",null,"Let\u2019s say you wanted to add a stylesheet to your site, you would have to go to each page and add it to the ",(0,i.kt)("inlineCode",{parentName:"p"},"<head>"),". It might not sound so bad for a two page site, imagine doing it for 100 pages. Even simple changes will take a long time to make."),(0,i.kt)("h3",{id:"creating-a-layout"},"Creating a layout"),(0,i.kt)("p",null,"Using a layout is a much better choice. Layouts are templates that wrap around your content. They live in a directory called ",(0,i.kt)("inlineCode",{parentName:"p"},"_layouts"),"."),(0,i.kt)("p",null,"Example layout:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <title>{{ page.title }}</title>\n  </head>\n  <body>\n    {{ content }}\n  </body>\n</html>\n')),(0,i.kt)("p",null,"The content of the page is replaced with a ",(0,i.kt)("inlineCode",{parentName:"p"},"content")," variable. ",(0,i.kt)("inlineCode",{parentName:"p"},"content")," is a special variable which has the value of the rendered content of the page it\u2019s called on."),(0,i.kt)("p",null,"To have index.html use this layout, you can set a ",(0,i.kt)("inlineCode",{parentName:"p"},"layout")," variable in front matter. The layout wraps around the content of the page so all you need in ",(0,i.kt)("inlineCode",{parentName:"p"},"index.html")," is:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-liquid"},'---\nlayout: default\ntitle: Home\n---\n<h1>{{ "Hello World!" | downcase }}</h1>\n')),(0,i.kt)("p",null,"Note that you can access the page front matter from the layout. In this case ",(0,i.kt)("inlineCode",{parentName:"p"},"title")," is set in the index page\u2019s front matter but is output in the layout."),(0,i.kt)("h2",{id:"5-includes"},"5. Includes"),(0,i.kt)("p",null,"Navigation should be on every page so adding it to your layout is the correct place to do this. Instead of adding it directly to the layout, let\u2019s use this as an opportunity to learn about includes."),(0,i.kt)("h3",{id:"include-tag"},"Include tag"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"include")," tag allows you to include content from another file stored in an ",(0,i.kt)("inlineCode",{parentName:"p"},"_includes")," folder. Includes are useful for having a single source for source code that repeats around the site or for improving the readability."),(0,i.kt)("p",null,"Navigation source code can get complex so sometimes it\u2019s nice to move it into an include."),(0,i.kt)("h3",{id:"include-usage"},"Include usage"),(0,i.kt)("p",null,"Example for the navigation file '","_","includes/navigation.html':"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<nav>\n  <a href="/">Home</a>\n  <a href="/about.html">About</a>\n</nav>\n')),(0,i.kt)("p",null,"Adding the navigation to ","_","layouts/default.html:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <title>{{ page.title }}</title>\n  </head>\n  <body>\n    {% include navigation.html %} {{ content }}\n  </body>\n</html>\n')),(0,i.kt)("h3",{id:"current-page-highlighting"},"Current page highlighting"),(0,i.kt)("p",null,"To highlight the current page in the navigation, ",(0,i.kt)("inlineCode",{parentName:"p"},"_includes/navigation.html")," needs to know the URL of the page it\u2019s inserted into so it can add styling. Jekyll has useful ",(0,i.kt)("a",{parentName:"p",href:"https://jekyllrb.com/docs/variables/"},"variables")," available one of which is page.url."),(0,i.kt)("p",null,"Using ",(0,i.kt)("inlineCode",{parentName:"p"},"page.url")," you can check if each link is the current page and color it red if true:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<nav>\n  <a href="/" {% if page.url == "/" %}style="color: red;"{% endif %}>\n    Home\n  </a>\n  <a href="/about.html" {% if page.url == "/about.html" %}style="color: red;"{% endif %}>\n    About\n  </a>\n</nav>\n')),(0,i.kt)("h2",{id:"6-data-files"},"6. Data Files"),(0,i.kt)("p",null,"Jekyll ",(0,i.kt)("strong",{parentName:"p"},"supports loading data from YAML, JSON, and CSV files")," located in a ",(0,i.kt)("inlineCode",{parentName:"p"},"_data directory"),". Data files are a great way to separate content from source code to make the site easier to maintain."),(0,i.kt)("h3",{id:"data-file-usage"},"Data file usage"),(0,i.kt)("p",null,"Let's demonstrate the usage of a data file by using it to store the contents of the site navigation and then iterate over it in the navigation include."),(0,i.kt)("p",null,"YAML is a format that\u2019s common in the Ruby ecosystem. We\u2019ll use it to store an array of navigation items each with a name and link."),(0,i.kt)("p",null,"The data file looks like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"- name: Home\n  link: /\n- name: About\n  link: /about.html\n")),(0,i.kt)("p",null,"Jekyll makes this data file available to you at ",(0,i.kt)("inlineCode",{parentName:"p"},"site.data.navigation"),". Instead of outputting each link in ",(0,i.kt)("inlineCode",{parentName:"p"},"_includes/navigation.html"),", now you can iterate over the data file instead:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-liquid"},'<nav>\n  {% for item in site.data.navigation %}\n    <a href="{{ item.link }}" {% if page.url == item.link %}style="color: red;"{% endif %}>\n      {{ item.name }}\n    </a>\n  {% endfor %}\n</nav>\n')),(0,i.kt)("p",null,"This makes it much easier to add new items to the navigation."),(0,i.kt)("h2",{id:"7-assets"},"7. Assets"),(0,i.kt)("p",null,"Using CSS, JS, images and other assets is straightforward with Jekyll. Place them in your site folder and they\u2019ll copy across to the built site."),(0,i.kt)("p",null,"Jekyll sites often use this structure to keep assets organized:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"assets",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"css"),(0,i.kt)("li",{parentName:"ul"},"images"),(0,i.kt)("li",{parentName:"ul"},"js")))),(0,i.kt)("h3",{id:"sass"},"Sass"),(0,i.kt)("p",null,"We can style the content of our html with a class like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-liquid"},'<nav>\n{% for item in site.data.navigation %}\n<a href="{{ item.link }}" {% if page.url == item.link %}class="current"{% endif %}>{{ item.name }}</a>\n{% endfor %}\n</nav>\n')),(0,i.kt)("p",null,"We could use a standard css file but Jekyll also supports Sass. Sass is a fantastic extension to CSS baked right into Jekyll."),(0,i.kt)("p",null,"Example sass file under ",(0,i.kt)("inlineCode",{parentName:"p"},"/assets/css/styles.scss"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scss"},'---\n---\n\n@import "main";\n')),(0,i.kt)("p",null,"The empty front matter at the top tells Jekyll it needs to process the file. The ",(0,i.kt)("inlineCode",{parentName:"p"},'@import "main"')," tells Sass to look for a file called ",(0,i.kt)("inlineCode",{parentName:"p"},"main.scss")," in the sass directory (",(0,i.kt)("inlineCode",{parentName:"p"},"_sass/")," by default which is directly under root folder of your website)."),(0,i.kt)("p",null,"For larger projects, this is a great way to keep your CSS organized. We create a Sass file at ",(0,i.kt)("inlineCode",{parentName:"p"},"/_sass/main.scss")," with the following content:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scss"},".current {\n  color: green;\n}\n")),(0,i.kt)("p",null,"We\u2019ll need to reference the stylesheet in our layout."),(0,i.kt)("p",null,"We add the stylesheet to the ",(0,i.kt)("inlineCode",{parentName:"p"},"<head>")," of ",(0,i.kt)("inlineCode",{parentName:"p"},"_layouts/default.html"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <title>{{ page.title }}</title>\n    <link rel="stylesheet" href="/assets/css/styles.css" />\n  </head>\n  <body>\n    {% include navigation.html %} {{ content }}\n  </body>\n</html>\n')),(0,i.kt)("h2",{id:"8-blogging"},"8. Blogging"),(0,i.kt)("p",null,"In true Jekyll style, blogging is powered by text files only."),(0,i.kt)("h3",{id:"posts"},"Posts"),(0,i.kt)("p",null,"Blog posts live in a folder called ",(0,i.kt)("inlineCode",{parentName:"p"},"_posts"),". ",(0,i.kt)("strong",{parentName:"p"},"The filename for posts have a special format:")," the publish date, then a title, followed by an extension."),(0,i.kt)("p",null,"An example of a post looks like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'---\nlayout: post\nauthor: jill\n---\nA banana is an edible fruit \u2013 botanically a berry \u2013 produced by several kinds\nof large herbaceous flowering plants in the genus Musa.\n\nIn some countries, bananas used for cooking may be called "plantains",\ndistinguishing them from dessert bananas. The fruit is variable in size, color,\nand firmness, but is usually elongated and curved, with soft flesh rich in\nstarch covered with a rind, which may be green, yellow, red, purple, or brown\nwhen ripe.\n')),(0,i.kt)("p",null,"This is like the ",(0,i.kt)("inlineCode",{parentName:"p"},"about.md")," you created before except it has an ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," and a different layout. author is a custom variable, it\u2019s not required and could have been named something like ",(0,i.kt)("inlineCode",{parentName:"p"},"creator"),"."),(0,i.kt)("h3",{id:"layout"},"Layout"),(0,i.kt)("p",null,"We'll create the ",(0,i.kt)("inlineCode",{parentName:"p"},"post")," layout at ",(0,i.kt)("inlineCode",{parentName:"p"},"_layouts/post.html")," with the following content:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-liquid"},"---\nlayout: default\n---\n<h1>{{ page.title }}</h1>\n<p>{{ page.date | date_to_string }} - {{ page.author }}</p>\n\n{{ content }}\n")),(0,i.kt)("p",null,"This is an example of layout inheritance. The post layout outputs the title, date, author and content body which is wrapped by the default layout."),(0,i.kt)("p",null,"Also note the ",(0,i.kt)("inlineCode",{parentName:"p"},"date_to_string")," filter, this formats a date into a nicer format."),(0,i.kt)("h3",{id:"list-posts"},"List posts"),(0,i.kt)("p",null,"There\u2019s currently no way to navigate to the blog post. Typically a blog has a page which lists all the posts. Jekyll makes posts available at ",(0,i.kt)("inlineCode",{parentName:"p"},"site.posts"),"."),(0,i.kt)("p",null,"We create ",(0,i.kt)("inlineCode",{parentName:"p"},"blog.html")," in your root (",(0,i.kt)("inlineCode",{parentName:"p"},"/blog.html"),") with the following content:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'---\nlayout: default\ntitle: Blog\n---\n\n<h1>Latest Posts</h1>\n\n<ul>\n  {% for post in site.posts %}\n  <li>\n    <h2><a href="{{ post.url }}">{{ post.title }}</a></h2>\n    <p>{{ post.excerpt }}</p>\n  </li>\n  {% endfor %}\n</ul>\n')),(0,i.kt)("p",null,"There\u2019s a few things to note with this code:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"post.url")," is automatically set by Jekyll to the output path of the post"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"post.title")," is pulled from the post filename and can be overridden by setting ",(0,i.kt)("inlineCode",{parentName:"li"},"title")," in front matter"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"post.excerpt")," is the first paragraph of content by default")),(0,i.kt)("p",null,"We'll also need a way to navigate to this page through the main navigation. We add an entry for the blog page in ","_","data/navigation.yml:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"- name: Home\n  link: /\n- name: About\n  link: /about.html\n- name: Blog\n  link: /blog.html\n")),(0,i.kt)("h3",{id:"more-posts"},"More posts"),(0,i.kt)("p",null,"Now we can add additional posts to ",(0,i.kt)("inlineCode",{parentName:"p"},"_posts")," and they will show up on the blog page."),(0,i.kt)("h2",{id:"9-collections"},"9. Collections"),(0,i.kt)("p",null,"Collections are similar to posts except the content doesn\u2019t have to be grouped by date."),(0,i.kt)("h3",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,"To set up a collection we'll need to tell Jekyll about it. Jekyll configuration happens in a file called ",(0,i.kt)("inlineCode",{parentName:"p"},"_config.yml")," (by default)."),(0,i.kt)("p",null,"To reload the configuration we'll need to restart the server by terminating and re-executing ",(0,i.kt)("inlineCode",{parentName:"p"},"jekyll serve"),"."),(0,i.kt)("h3",{id:"add-authors"},"Add authors"),(0,i.kt)("p",null,"Documents (the items in a collection) live in a folder in the root of the site named ",(0,i.kt)("inlineCode",{parentName:"p"},"_*collection_name*"),". In this case, ",(0,i.kt)("inlineCode",{parentName:"p"},"_authors"),"."),(0,i.kt)("p",null,"We can add authors to this collection by creating one like this (","_","authors/jill.md):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"---\nshort_name: jill\nname: Jill Smith\nposition: Chief Editor\n---\nJill is an avid fruit grower based in the south of France.\n")),(0,i.kt)("h3",{id:"staff-page"},"Staff page"),(0,i.kt)("p",null,"Now we'll need to add a page which lists all the authors on the site. Jekyll makes the collection available at ",(0,i.kt)("inlineCode",{parentName:"p"},"site.authors"),"."),(0,i.kt)("p",null,"We create ",(0,i.kt)("inlineCode",{parentName:"p"},"staff.html")," and iterate over ",(0,i.kt)("inlineCode",{parentName:"p"},"site.authors")," to output all the staff:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"---\nlayout: default\ntitle: Staff\n---\n\n<h1>Staff</h1>\n\n<ul>\n  {% for author in site.authors %}\n  <li>\n    <h2>{{ author.name }}</h2>\n    <h3>{{ author.position }}</h3>\n    <p>{{ author.content | markdownify }}</p>\n  </li>\n  {% endfor %}\n</ul>\n")),(0,i.kt)("p",null,"Since the content is markdown, you need to run it through the ",(0,i.kt)("inlineCode",{parentName:"p"},"markdownify filter"),". This happens automatically when outputting using ",(0,i.kt)("inlineCode",{parentName:"p"},"{{ content }}")," in a layout."),(0,i.kt)("p",null,"We also need a way to navigate to this page through the main navigation. We open ",(0,i.kt)("inlineCode",{parentName:"p"},"_data/navigation.yml")," and add an entry for the staff page:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"- name: Home\n  link: /\n- name: About\n  link: /about.html\n- name: Blog\n  link: /blog.html\n- name: Staff\n  link: /staff.html\n")),(0,i.kt)("h3",{id:"output-a-page"},"Output a page"),(0,i.kt)("p",null,"By default, collections do not output a page for documents. In this case we want each author to have their own page so let\u2019s tweak the collection configuration."),(0,i.kt)("p",null,"We open ",(0,i.kt)("inlineCode",{parentName:"p"},"_config.yml")," and add ",(0,i.kt)("inlineCode",{parentName:"p"},"output: true")," to the author collection configuration:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"collections:\n  authors:\n    output: true\n")),(0,i.kt)("p",null,"We can link to the output page using author.url:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'---\nlayout: default\n---\n\n<h1>Staff</h1>\n\n<ul>\n  {% for author in site.authors %}\n  <li>\n    <h2><a href="{{ author.url }}">{{ author.name }}</a></h2>\n    <h3>{{ author.position }}</h3>\n    <p>{{ author.content | markdownify }}</p>\n  </li>\n  {% endfor %}\n</ul>\n')),(0,i.kt)("p",null,"Just like posts we\u2019ll need to create a layout for authors. We create ",(0,i.kt)("inlineCode",{parentName:"p"},"_layouts/author.html")," with the following content:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"---\nlayout: default\n---\n\n<h1>{{ page.name }}</h1>\n<h2>{{ page.position }}</h2>\n\n{{ content }}\n")),(0,i.kt)("h3",{id:"front-matter-defaults"},"Front matter defaults"),(0,i.kt)("p",null,"Now we need to configure the author documents to use the ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," layout. We could do this in the front matter like we have previously but that\u2019s getting repetitive."),(0,i.kt)("p",null,"What we really want is all posts to automatically have the post layout, authors to have author and everything else to use the default."),(0,i.kt)("p",null,"We can achieve this by using ",(0,i.kt)("a",{parentName:"p",href:"https://jekyllrb.com/docs/configuration/front-matter-defaults/"},"front matter defaults")," in ",(0,i.kt)("inlineCode",{parentName:"p"},"_config.yml"),". You set a scope of what the default applies to, then the default front matter you\u2019d like."),(0,i.kt)("p",null,"We add defaults for layouts to our ",(0,i.kt)("inlineCode",{parentName:"p"},"_config.yml"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'collections:\n  authors:\n    output: true\n\ndefaults:\n  - scope:\n      path: ""\n      type: "authors"\n    values:\n      layout: "author"\n  - scope:\n      path: ""\n      type: "posts"\n    values:\n      layout: "post"\n  - scope:\n      path: ""\n    values:\n      layout: "default"\n')),(0,i.kt)("p",null,"Now we can remove layout from the front matter of all pages and posts. Note that any time we update ",(0,i.kt)("inlineCode",{parentName:"p"},"_config.yml")," you\u2019ll need to restart Jekyll for the changes to take affect."),(0,i.kt)("h3",{id:"list-authors-posts"},"List author\u2019s posts"),(0,i.kt)("p",null,"Let\u2019s list the posts an author has published on their page. To do this we need to match the author ",(0,i.kt)("inlineCode",{parentName:"p"},"short_name")," to the post ",(0,i.kt)("inlineCode",{parentName:"p"},"author"),". We use this to filter the posts by author."),(0,i.kt)("p",null,"We iterate over this filtered list in ",(0,i.kt)("inlineCode",{parentName:"p"},"_layouts/author.html")," to output the author\u2019s posts:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"---\nlayout: default\n---\n\n<h1>{{ page.name }}</h1>\n<h2>{{ page.position }}</h2>\n\n{{ content }}\n\n<h2>Posts</h2>\n<ul>\n  {% assign filtered_posts = site.posts | where: 'author', page.short_name %} {%\n  for post in filtered_posts %}\n  <li><a href=\"{{ post.url }}\">{{ post.title }}</a></li>\n  {% endfor %}\n</ul>\n")),(0,i.kt)("h3",{id:"link-to-authors-page"},"Link to authors page"),(0,i.kt)("p",null,"The posts have a reference to the author so let\u2019s link it to the author\u2019s page. We can do this using a similar filtering technique in ",(0,i.kt)("inlineCode",{parentName:"p"},"_layouts/post.html"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"---\nlayout: default\n---\n\n<h1>{{ page.title }}</h1>\n\n<p>\n  {{ page.date | date_to_string }} {% assign author = site.authors | where:\n  'short_name', page.author | first %} {% if author %} -\n  <a href=\"{{ author.url }}\">{{ author.name }}</a>\n  {% endif %}\n</p>\n\n{{ content }}\n")),(0,i.kt)("h2",{id:"10-deployment"},"10. Deployment"),(0,i.kt)("p",null,"In this final step we\u2019ll get the site ready for production."),(0,i.kt)("h3",{id:"gemfile"},"Gemfile"),(0,i.kt)("p",null,"It\u2019s good practice to have a ",(0,i.kt)("a",{parentName:"p",href:"https://jekyllrb.com/docs/ruby-101/#gemfile"},"Gemfile")," for your site. This ensures the version of Jekyll and other gems remains consistent across different environments."),(0,i.kt)("p",null,"We create Gemfile in the root with the following content:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-gemfile"},"source 'https://rubygems.org'\n\ngem 'jekyll'\n")),(0,i.kt)("p",null,"Then we run ",(0,i.kt)("inlineCode",{parentName:"p"},"bundle install")," in the terminal. This installs the gems and creates ",(0,i.kt)("inlineCode",{parentName:"p"},"Gemfile.lock")," which locks the current gem versions for a future ",(0,i.kt)("inlineCode",{parentName:"p"},"bundle install"),". If we ever want to update the gem versions we can run ",(0,i.kt)("inlineCode",{parentName:"p"},"bundle update"),"."),(0,i.kt)("p",null,"When using a ",(0,i.kt)("inlineCode",{parentName:"p"},"Gemfile"),", we'll run commands like ",(0,i.kt)("inlineCode",{parentName:"p"},"jekyll serve")," with ",(0,i.kt)("inlineCode",{parentName:"p"},"bundle exec")," prefixed. So the full command is:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-CLI"},"bundle exec jekyll serve\n")),(0,i.kt)("p",null,"This restricts our Ruby environment to only use gems set in our Gemfile."),(0,i.kt)("h3",{id:"plugins"},"Plugins"),(0,i.kt)("p",null,"Jekyll plugins allow you to create custom generated content specific to your site. There\u2019s many ",(0,i.kt)("a",{parentName:"p",href:"https://jekyllrb.com/docs/plugins/"},"plugins")," available or you can even write your own."),(0,i.kt)("p",null,"There\u2019s three official plugins which are useful on almost any Jekyll site:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/jekyll/jekyll-sitemap"},"jekyll-sitemap")," - Creates a sitemap file to help search engines index content"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/jekyll/jekyll-feed"},"https://github.com/jekyll/jekyll-feed")," - Creates an RSS feed for your posts"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/jekyll/jekyll-seo-tag"},"jekyll-seo-tag")," - Adds meta tags to help with SEO")),(0,i.kt)("p",null,"To use these first we need to add them to our ",(0,i.kt)("inlineCode",{parentName:"p"},"Gemfile"),". If we put them in a ",(0,i.kt)("inlineCode",{parentName:"p"},"jekyll_plugins")," group they\u2019ll automatically be required into Jekyll:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-Gemfile"},"source 'https://rubygems.org'\n\ngem 'jekyll'\n\ngroup :jekyll_plugins do\n  gem 'jekyll-sitemap'\n  gem 'jekyll-feed'\n  gem 'jekyll-seo-tag'\nend\n")),(0,i.kt)("p",null,"Then we add these lines to our ","_","config.yml:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"plugins:\n  - jekyll-feed\n  - jekyll-sitemap\n  - jekyll-seo-tag\n")),(0,i.kt)("p",null,"Now we install them by running a ",(0,i.kt)("inlineCode",{parentName:"p"},"bundle update"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"jekyll-sitemap")," doesn\u2019t need any setup, it will create your sitemap on build.\nFor ",(0,i.kt)("inlineCode",{parentName:"p"},"jekyll-feed")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"jekyll-seo-tag")," we need to add tags to ",(0,i.kt)("inlineCode",{parentName:"p"},"_layouts/default.html"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <title>{{ page.title }}</title>\n    <link rel="stylesheet" href="/assets/css/styles.css" />\n    {% feed_meta %} {% seo %}\n  </head>\n  <body>\n    {% include navigation.html %} {{ content }}\n  </body>\n</html>\n')),(0,i.kt)("h3",{id:"environments"},"Environments"),(0,i.kt)("p",null,"Sometimes we might want to output something in production but not in development. Analytics scripts are the most common example of this."),(0,i.kt)("p",null,"To do this we can use environments. We can set the environment by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"JEKYLL_ENV")," environment variable when running a command. For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-CLI"},"JEKYLL_ENV=production bundle exec jekyll build\n")),(0,i.kt)("p",null,"By default ",(0,i.kt)("inlineCode",{parentName:"p"},"JEKYLL_ENV")," is development. The ",(0,i.kt)("inlineCode",{parentName:"p"},"JEKYLL_ENV")," is available in liquid using ",(0,i.kt)("inlineCode",{parentName:"p"},"jekyll.environment"),". So to only output the analytics script on production we would do the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-liquid"},'{% if jekyll.environment == "production" %}\n  <script src="my-analytics-script.js"><\/script>\n{% endif %}\n')),(0,i.kt)("h3",{id:"deployment"},"Deployment"),(0,i.kt)("p",null,"The final step is to get the site onto a production server. The most basic way to do this is to run a production build:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-CLI"},"JEKYLL_ENV=production bundle exec jekyll build\n")),(0,i.kt)("p",null,"And copy the contents of ",(0,i.kt)("inlineCode",{parentName:"p"},"_site")," to the server."),(0,i.kt)("p",null,"A better way is to automate this process using a ",(0,i.kt)("a",{parentName:"p",href:"https://jekyllrb.com/docs/deployment/automated/"},"CI")," or ",(0,i.kt)("a",{parentName:"p",href:"https://jekyllrb.com/docs/deployment/third-party/"},"3rd party"),"."),(0,i.kt)("h2",{id:"variables"},"Variables"),(0,i.kt)("p",null,"Jekyll traverses your site looking for files to process. Any files with ",(0,i.kt)("a",{parentName:"p",href:"https://jekyllrb.com/docs/front-matter/"},"front matter")," are subject to processing. For each of these files, Jekyll makes a variety of data available via the Liquid. The following is a reference of the available data:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"---\n---\n\n<h1>{{ page.name }}</h1>\n<h2>{{ page.position }}</h2>\n\n{{ content }}\n\n<h2>Posts</h2>\n<ul>\n  {% assign filtered_posts = site.posts | where: 'author', page.short_name %} {%\n  for post in filtered_posts %}\n  <li><a href=\"{{ post.url }}\">{{ post.title }}</a></li>\n  {% endfor %}\n</ul>\n")),(0,i.kt)("h3",{id:"global-variables"},"Global Variables"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"GlobalVariables",src:a(2091).Z})),(0,i.kt)("h3",{id:"site-variables"},"Site Variables"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"SiteVariables",src:a(7631).Z})),(0,i.kt)("h3",{id:"page-variables"},"Page Variables"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"PageVariables",src:a(7905).Z})),(0,i.kt)("p",null,"Use Custom Front Matter:"),(0,i.kt)("p",null,"Any custom front matter that you specify will be available under ",(0,i.kt)("inlineCode",{parentName:"p"},"page"),". For example, if you specify ",(0,i.kt)("inlineCode",{parentName:"p"},"custom_css: true")," in a page\u2019s front matter, that value will be available as ",(0,i.kt)("inlineCode",{parentName:"p"},"page.custom_css"),"."),(0,i.kt)("p",null,"If you specify front matter in a ",(0,i.kt)("inlineCode",{parentName:"p"},"layout"),", access that via layout. For example, if you specify ",(0,i.kt)("inlineCode",{parentName:"p"},"class: full_page")," in a layout\u2019s front matter, that value will be available as ",(0,i.kt)("inlineCode",{parentName:"p"},"layout.class")," in the layout and its parents."),(0,i.kt)("h3",{id:"paginator-variables"},"Paginator Variables"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Paginator",src:a(211).Z})),(0,i.kt)("p",null,"Paginator variable availability:"),(0,i.kt)("p",null,"These are only available in index files, however they can be located in a subdirectory, such as ",(0,i.kt)("inlineCode",{parentName:"p"},"/blog/index.html"),"."))}h.isMDXComponent=!0},9914:function(e,t,a){t.Z=a.p+"assets/images/DirectoryExplanation-fef3276d4898c345e57b881c6dec917c.PNG"},2091:function(e,t,a){t.Z=a.p+"assets/images/GlobalVariables-ada2408c60cb663032b57e8e091fae8f.PNG"},7905:function(e,t,a){t.Z=a.p+"assets/images/PageVariables-8d4b03022455832f6598854127564abb.PNG"},211:function(e,t,a){t.Z=a.p+"assets/images/Paginator-a33a2f4bc6e5eb903aca6ddc593fc1a7.PNG"},7631:function(e,t,a){t.Z=a.p+"assets/images/SiteVariables-309bdb5fbf44dc012665a9c52d589d71.PNG"},2553:function(e,t,a){t.Z=a.p+"assets/images/directoryStructure-eaa544fdd9d4083bb53ab1f58f9dd9f5.PNG"}}]);