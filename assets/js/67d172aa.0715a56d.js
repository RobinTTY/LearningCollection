"use strict";(self.webpackChunklearning_knowledge_base=self.webpackChunklearning_knowledge_base||[]).push([[8898],{40168:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var o=n(74848),s=n(28453);const r={id:"context",title:"Context",sidebar_position:1},a=void 0,c={id:"web/react/advanced-concepts/context",title:"Context",description:"Context provides a way to pass data through the component tree without having to pass props down manually at every level.",source:"@site/docs/web/react/advanced-concepts/Context.md",sourceDirName:"web/react/advanced-concepts",slug:"/web/react/advanced-concepts/context",permalink:"/LearningCollection/web/react/advanced-concepts/context",draft:!1,unlisted:!1,editUrl:"https://github.com/RobinTTY/LearningCollection/tree/master/website/docs/web/react/advanced-concepts/Context.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"context",title:"Context",sidebar_position:1},sidebar:"docs",previous:{title:"Functional vs Class Components",permalink:"/LearningCollection/web/react/core-concepts/functionalVsClassComponents"},next:{title:"Fragments",permalink:"/LearningCollection/web/react/advanced-concepts/fragments"}},i={},l=[{value:"When to use context",id:"when-to-use-context",level:2},{value:"Context Limitations",id:"context-limitations",level:2},{value:"API",id:"api",level:2},{value:"React.createContext",id:"reactcreatecontext",level:3},{value:"Context.Provider",id:"contextprovider",level:3},{value:"Context.Consumer",id:"contextconsumer",level:3},{value:"Using context via Hook",id:"using-context-via-hook",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:"Context provides a way to pass data through the component tree without having to pass props down manually at every level"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"In a typical React application, data is passed top-down (parent to child) via props, but such usage can be cumbersome for certain types of props (e.g. locale preference, UI theme) that are required by many components within an application. Context provides a way to share values like these between components without having to explicitly pass a prop through every level of the tree."}),"\n",(0,o.jsx)(t.h2,{id:"when-to-use-context",children:"When to use context"}),"\n",(0,o.jsxs)(t.p,{children:["Context is designed to share ",(0,o.jsx)(t.strong,{children:'data that can be considered "global"'})," for a tree of React components, such as the current authenticated user, theme, or preferred language."]}),"\n",(0,o.jsx)(t.p,{children:'For example, in the code below we manually thread through a "theme" prop in order to style the Button component:'}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",metastring:"{8-11,14}",children:'class App extends React.Component {\n  render() {\n    return <Toolbar theme="dark" />;\n  }\n}\n\nfunction Toolbar(props) {\n  // The Toolbar component must take an extra "theme" prop\n  // and pass it to the ThemedButton. This can become painful\n  // if every single button in the app needs to know the theme\n  // because it would have to be passed through all components.\n  return (\n    <div>\n      <ThemedButton theme={props.theme} />\n    </div>\n  );\n}\n\nclass ThemedButton extends React.Component {\n  render() {\n    return <Button theme={this.props.theme} />;\n  }\n}\n'})}),"\n",(0,o.jsx)(t.p,{children:"Using context, we can avoid passing props through intermediate elements:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",metastring:"{1,6-7,9,16,26-27,30}",children:'// Create a context for the current theme (with "light" as the default).\nconst ThemeContext = React.createContext("light");\n\nclass App extends React.Component {\n  render() {\n    // Use a Provider to pass the current theme to the tree below.\n    // Any component can read it, no matter how deep it is.\n    return (\n      <ThemeContext.Provider value="dark">\n        <Toolbar />\n      </ThemeContext.Provider>\n    );\n  }\n}\n\n// A component in the middle doesn\'t have to pass the theme down explicitly anymore.\nfunction Toolbar() {\n  return (\n    <div>\n      <ThemedButton />\n    </div>\n  );\n}\n\nclass ThemedButton extends React.Component {\n  // Assign a contextType to read the current theme context.\n  // React will find the closest theme Provider above and use its value.\n  static contextType = ThemeContext;\n  render() {\n    return <Button theme={this.context} />;\n  }\n}\n'})}),"\n",(0,o.jsx)(t.h2,{id:"context-limitations",children:"Context Limitations"}),"\n",(0,o.jsx)(t.p,{children:"Context is not made for every scenario, it has a few limitations:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.a,{href:"https://github.com/facebook/react/issues/14110#issuecomment-448074060",children:"Context is not optimized for high frequency changes"})," (e.g. changes multiple times per second)","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["You could use something like ",(0,o.jsx)(t.a,{href:"https://react-redux.js.org/",children:"Redux"})," instead"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["Context shouldn't be used to replace ALL component communications and props","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:'Components should still be configurable via props and short "prop chains" might not need replacement'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"api",children:"API"}),"\n",(0,o.jsx)(t.h3,{id:"reactcreatecontext",children:"React.createContext"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",children:"const MyContext = React.createContext(defaultValue);\n"})}),"\n",(0,o.jsxs)(t.p,{children:["Creates a Context object. When React renders a component that subscribes to this Context object it will read the current context value from the closest matching ",(0,o.jsx)(t.code,{children:"Provider"})," above it in the tree."]}),"\n",(0,o.jsx)(t.h3,{id:"contextprovider",children:"Context.Provider"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",children:"<MyContext.Provider value={/* some value */}>\n"})}),"\n",(0,o.jsx)(t.p,{children:"Every Context object comes with a Provider React component that allows consuming components to subscribe to context changes."}),"\n",(0,o.jsxs)(t.p,{children:["The Provider component accepts a ",(0,o.jsx)(t.code,{children:"value"})," prop to be passed to consuming components that are descendants of this Provider. One Provider can be connected to many consumers. Providers can be nested to override values deeper within the tree. All consumers that are descendants of a Provider will re-render whenever the Provider\u2019s ",(0,o.jsx)(t.code,{children:"value"})," prop changes. Changes are determined by comparing the new and old values using the same algorithm as ",(0,o.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is#Description",children:"Object.is"}),"."]}),"\n",(0,o.jsx)(t.h3,{id:"contextconsumer",children:"Context.Consumer"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",children:"<MyContext.Consumer>\n  {value => /* render something based on the context value */}\n</MyContext.Consumer>\n"})}),"\n",(0,o.jsxs)(t.p,{children:["A React component that subscribes to context changes. Using this component lets you subscribe to a context within a function component. Requires a ",(0,o.jsx)(t.a,{href:"https://reactjs.org/docs/render-props.html#using-props-other-than-render",children:"function as a child"}),". The function receives the current context value and returns a React node. The ",(0,o.jsx)(t.code,{children:"value"})," argument passed to the function will be equal to the ",(0,o.jsx)(t.code,{children:"value"})," prop of the closest Provider for this context above in the tree."]}),"\n",(0,o.jsx)(t.h2,{id:"using-context-via-hook",children:"Using context via Hook"}),"\n",(0,o.jsxs)(t.p,{children:["When we are working with functional components we will want to use the ",(0,o.jsx)(t.code,{children:"useContext"})," hook. More info ",(0,o.jsx)(t.a,{href:"../hooks/useContext",children:"here"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>c});var o=n(96540);const s={},r=o.createContext(s);function a(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);